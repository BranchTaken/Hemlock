version: "3.9"
services:
  prod:
    build:
      args:
        - HEMLOCK_BOOTSTRAP_OCAML_VERSION=4.14.0
        - HEMLOCK_PLATFORM
        - HEMLOCK_UBUNTU_TAG=rolling
      context: .
      target: prod
    container_name: branchtaken__hemlock__prod
    image: branchtaken/hemlock:prod
    working_dir: /home/hemlock/Hemlock
  pre-push:
    build:
      args:
        - HEMLOCK_PRE_PUSH_CLONE_PATH
        - HEMLOCK_CHECK_OCP_INDENT_BASE_COMMIT
      target: pre-push
    extends: prod
    image: branchtaken/hemlock:pre-push
version: "3.9"
services:
  base:
    build:
      args:
        - HEMLOCK_BOOTSTRAP_OCAML_VERSION=4.14.0
        - HEMLOCK_PLATFORM
        - HEMLOCK_UBUNTU_TAG=rolling
      context: .
      target: base
    container_name: branchtaken__hemlock__base
    image: branchtaken/hemlock:base
  latest:
    build:
      target: latest
    container_name: branchtaken__hemlock__latest
    extends: base
    image: branchtaken/hemlock:latest
  tested:
    build:
      target: tested
    container_name: branchtaken__hemlock__tested
    extends: latest
    image: branchtaken/hemlock:tested
  pre-push:
    build:
      args:
        - HEMLOCK_PRE_PUSH_CLONE_PATH
        - HEMLOCK_CHECK_OCP_INDENT_BASE_COMMIT
      target: pre-push
    extends: base
    image: branchtaken/hemlock:pre-push